# ===================================================================
# ANYTIME POOJA - SPRING BOOT APPLICATION CONFIGURATION
# ===================================================================

# ===================================================================
# SERVER CONFIGURATION
# ===================================================================
server.port=${PORT:8080}
server.servlet.context-path=/api
server.servlet.session.timeout=30m
server.error.include-message=always
server.error.include-binding-errors=always

# ===================================================================
# DATABASE CONFIGURATION
# ===================================================================
# Supports both MySQL (local) and PostgreSQL (Render)
# Override with environment variables: SPRING_DATASOURCE_URL, SPRING_DATASOURCE_USERNAME, SPRING_DATASOURCE_PASSWORD
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:mysql://localhost:3306/anytime_pooja_web_backend?createDatabaseIfNotExist=true&useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Kolkata}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:root}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:Rparit@111288}
spring.datasource.driver-class-name=${SPRING_DATASOURCE_DRIVER_CLASS_NAME:com.mysql.cj.jdbc.Driver}

# Connection Pool Configuration
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# ===================================================================
# JPA / HIBERNATE CONFIGURATION
# ===================================================================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
# Hibernate will auto-detect dialect based on datasource URL
spring.jpa.properties.hibernate.dialect=${SPRING_JPA_HIBERNATE_DIALECT:org.hibernate.dialect.MySQLDialect}
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.enable_lazy_load_no_trans=false

# ===================================================================
# FILE UPLOAD CONFIGURATION
# ===================================================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
spring.servlet.multipart.file-size-threshold=2KB

# File Storage Path (Local filesystem)
file.upload-dir=./uploads
file.profile-images-dir=./uploads/profiles
file.kyc-documents-dir=./uploads/kyc
file.product-images-dir=./uploads/products
file.chat-attachments-dir=./uploads/chat

# ===================================================================
# EMAIL CONFIGURATION (Gmail SMTP)
# ===================================================================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=your-email@gmail.com
spring.mail.password=your-app-password
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# Email Templates
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html
spring.thymeleaf.mode=HTML
spring.thymeleaf.cache=false

# ===================================================================
# SECURITY CONFIGURATION
# ===================================================================
# Session-based authentication (No JWT)
spring.security.session.creation-policy=IF_REQUIRED
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=false
server.servlet.session.cookie.name=ANYTIME_POOJA_SESSION
server.servlet.session.cookie.max-age=1800

# CORS Configuration
app.cors.allowed-origins=http://localhost:3000,http://localhost:4200
app.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
app.cors.allowed-headers=*
app.cors.allow-credentials=true

# ===================================================================
# PAYMENT GATEWAY CONFIGURATION (Razorpay)
# ===================================================================
razorpay.key.id=rzp_test_YOUR_KEY_ID
razorpay.key.secret=YOUR_KEY_SECRET
razorpay.currency=INR
razorpay.company.name=Anytime Pooja

# ===================================================================
# SMS CONFIGURATION (Twilio)
# ===================================================================
twilio.account.sid=YOUR_ACCOUNT_SID
twilio.auth.token=YOUR_AUTH_TOKEN
twilio.phone.number=+1234567890

# ===================================================================
# FIREBASE CONFIGURATION (Push Notifications)
# ===================================================================
firebase.config.path=classpath:firebase-service-account.json
firebase.database.url=https://anytime-pooja.firebaseio.com

# ===================================================================
# APPLICATION SPECIFIC CONFIGURATION
# ===================================================================
app.name=Anytime Pooja
app.version=1.0.0
app.description=Digital Platform for Booking Pandits and Pooja Services

# Commission Configuration
app.commission.percentage=10
app.commission.min-amount=50

# OTP Configuration
app.otp.expiry-minutes=10
app.otp.length=6

# Booking Configuration
app.booking.cancellation-window-hours=24
app.booking.auto-complete-hours=2
app.booking.slot-duration-minutes=60

# Payout Configuration
app.payout.min-amount=500
app.payout.processing-day=5

# Search Configuration
app.search.default-radius-km=25
app.search.max-radius-km=100

# ===================================================================
# ACTUATOR CONFIGURATION (Health Monitoring)
# ===================================================================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized
management.metrics.export.simple.enabled=true

# ===================================================================
# LOGGING CONFIGURATION
# ===================================================================
logging.level.root=INFO
logging.level.com.anytime.pooja=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Log file configuration
logging.file.name=logs/anytime-pooja.log
logging.file.max-size=10MB
logging.file.max-history=30

# ===================================================================
# JACKSON CONFIGURATION (JSON)
# ===================================================================
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=Asia/Kolkata
spring.jackson.default-property-inclusion=non_null

# ===================================================================
# API DOCUMENTATION (Swagger/OpenAPI)
# ===================================================================
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.operations-sorter=method
springdoc.swagger-ui.tags-sorter=alpha
springdoc.swagger-ui.doc-expansion=none

# ===================================================================
# CACHE CONFIGURATION
# ===================================================================
spring.cache.type=simple
spring.cache.cache-names=pandits,products,categories,services

# ===================================================================
# SCHEDULING CONFIGURATION
# ===================================================================
spring.task.scheduling.pool.size=5
spring.task.execution.pool.core-size=10
spring.task.execution.pool.max-size=50
spring.task.execution.pool.queue-capacity=100
